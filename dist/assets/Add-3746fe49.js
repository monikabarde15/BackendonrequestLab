import{t as B,c as D,r as d,s as S,j as t,a as e,g as k,b as F}from"./index-3a453257.js";import{I as R}from"./IconSave-e9bb8cf2.js";import{z as C}from"./index-37c81567.js";const L=()=>{const b=B(),h=D(),[f,v]=d.useState(!1),[i,o]=d.useState([{id:1,title:"",description:"",rate:0,quantity:0,amount:0}]),[u,y]=d.useState("USD - US Dollar");d.useEffect(()=>{h(S("Invoice Add"))},[h]);const g=["USD - US Dollar","GBP - British Pound","IDR - Indonesian Rupiah","INR - Indian Rupee","BRL - Brazilian Real","EUR - Germany (Euro)","TRY - Turkish Lira"],p={"USD - US Dollar":"$","GBP - British Pound":"£","IDR - Indonesian Rupiah":"Rp","INR - Indian Rupee":"₹","BRL - Brazilian Real":"R$","EUR - Germany (Euro)":"€","TRY - Turkish Lira":"₺"},x=()=>{let a=i.length?i.reduce((l,r)=>r.id>l?r.id:l,i[0].id):0;o([...i,{id:a+1,title:"",description:"",rate:0,quantity:0,amount:0}])},I=a=>{o(i.filter(l=>l.id!==a.id))},N=(a,l,r)=>{const c=[...i],m=c.find(s=>s.id===r);m&&(a==="quantity"&&(m.quantity=Number(l)),a==="price"&&(m.amount=Number(l)),o(c))},w=()=>{const a=[{id:"number",name:"Invoice Number"},{id:"invoiceLabel",name:"Invoice Label"},{id:"startDate",name:"Invoice Date"},{id:"dueDate",name:"Due Date"},{id:"reciever-name",name:"Name"},{id:"reciever-email",name:"Email"},{id:"reciever-address",name:"Address"},{id:"acno",name:"Account Number"},{id:"bank-name",name:"Bank Name"},{id:"swiftNumber",name:"SWIFT Number"},{id:"ibanNumber",name:"IBAN Number"},{id:"country",name:"Country"},{id:"tax",name:"Tax"},{id:"discount",name:"Discount"},{id:"shipping-charge",name:"Shipping Charge"},{id:"currency",name:"Currency"},{id:"payment-method",name:"Accept Payment Via"},{id:"notes",name:"Notes"}];for(const l of a){const r=document.getElementById(l.id);if(console.log("el=",r),!r)return alert(`Missing form element: ${l.name}`),!1;const c=r.value.trim();if(!c){const m=document.getElementById(l.id);if(!m)return console.error("Element not found"),!1;const s=m.parentNode;if(!s)return console.error("Parent node not found"),!1;let n=document.getElementById(l.id+"-error-message");return n||(n=document.createElement("div"),n.id=l.id+"-error-message",n.style.color="red",n.style.fontSize="0.9em",n.style.marginTop="4px",n.style.marginLeft="0px",n.style.display="block",s.appendChild(n)),n.innerHTML="",m.focus(),!1}if(l.name==="Email"&&!/\S+@\S+\.\S+/.test(c))return alert("Please enter a valid Email"),!1}return!0},E=async()=>{if(!w())return;v(!0);const a={invoiceNumber:document.getElementById("number").value,invoiceLabel:document.getElementById("invoiceLabel").value,invoiceDate:document.getElementById("startDate").value,dueDate:document.getElementById("dueDate").value,billing:{name:document.getElementById("reciever-name").value,email:document.getElementById("reciever-email").value,address:document.getElementById("reciever-address").value,phone:document.getElementById("acno").value},paymentDetails:{accountNumber:document.getElementById("acno").value,bankName:document.getElementById("bank-name").value,swiftNumber:"",ibanNumber:"",country:""},items:i.map(l=>({title:l.title,description:l.description,quantity:l.quantity,amount:l.amount})),tax:Number(document.getElementById("tax").value),discount:Number(document.getElementById("discount").value),shippingCharge:Number(document.getElementById("shipping-charge").value),currency:document.getElementById("currency").value,notes:document.getElementById("notes").value};try{const l=await F.post("https://cybitbackend.onrender.com/api/estimation",a);l.data.success&&setTimeout(()=>{C.success("Estimation saved! ID: "+l.data.invoice._id),b("/apps/Estimation/list")},1e3)}catch(l){console.error(l),alert("Error saving invoice.")}};return t("div",{className:"flex xl:flex-row flex-col gap-2.5",children:[t("div",{className:"panel px-0 flex-1 py-6 ltr:xl:mr-6 rtl:xl:ml-6",children:[t("div",{className:"flex justify-between flex-wrap px-4",children:[t("div",{className:"mb-6 lg:w-1/2 w-full",children:[e("div",{className:"flex items-center text-black dark:text-white shrink-0",children:e("img",{src:"/assets/images/cybblackpink.png",alt:"img",className:"w-14"})}),t("div",{className:"space-y-1 mt-6 text-gray-500 dark:text-gray-400",children:[e("div",{children:"G-9/85,Sangam Vihar New Delhi-110080"}),e("div",{children:"info@cybite.in"}),e("div",{children:"+91 8210543772"})]})]}),t("div",{className:"lg:w-1/2 w-full lg:max-w-fit",children:[t("div",{className:"flex items-center",children:[e("label",{htmlFor:"number",className:"flex-1 ltr:mr-2 rtl:ml-2 mb-0",children:"Invoice Number"}),e("input",{id:"number",type:"text",className:"form-input lg:w-[250px] w-2/3",placeholder:"#8801"})]}),t("div",{className:"flex items-center mt-4",children:[e("label",{htmlFor:"invoiceLabel",className:"flex-1 ltr:mr-2 rtl:ml-2 mb-0",children:"Invoice Label"}),e("input",{id:"invoiceLabel",type:"text",className:"form-input lg:w-[250px] w-2/3",placeholder:"Enter Invoice Label"})]}),t("div",{className:"flex items-center mt-4",children:[e("label",{htmlFor:"startDate",className:"flex-1 ltr:mr-2 rtl:ml-2 mb-0",children:"Invoice Date"}),e("input",{id:"startDate",type:"date",className:"form-input lg:w-[250px] w-2/3"})]}),t("div",{className:"flex items-center mt-4",children:[e("label",{htmlFor:"dueDate",className:"flex-1 ltr:mr-2 rtl:ml-2 mb-0",children:"Due Date"}),e("input",{id:"dueDate",type:"date",className:"form-input lg:w-[250px] w-2/3"})]})]})]}),e("hr",{className:"border-white-light dark:border-[#1b2e4b] my-6"}),e("div",{className:"mt-8 px-4",children:t("div",{className:"flex justify-between lg:flex-row flex-col",children:[t("div",{className:"lg:w-1/2 w-full ltr:lg:mr-6 rtl:lg:ml-6 mb-6",children:[e("div",{className:"text-lg",children:"Bill To :-"}),t("div",{className:"mt-4 flex items-center",children:[e("label",{htmlFor:"reciever-name",className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Name"}),e("input",{id:"reciever-name",type:"text",className:"form-input flex-1",placeholder:"Enter Name"})]}),t("div",{className:"mt-4 flex items-center",children:[e("label",{htmlFor:"reciever-email",className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Email"}),e("input",{id:"reciever-email",type:"email",className:"form-input flex-1",placeholder:"Enter Email"})]}),t("div",{className:"mt-4 flex items-center",children:[e("label",{htmlFor:"reciever-address",className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Address"}),e("input",{id:"reciever-address",type:"text",className:"form-input flex-1",placeholder:"Enter Address"})]})]}),t("div",{className:"lg:w-1/2 w-full",children:[e("div",{className:"text-lg",children:"Payment Details:"}),t("div",{className:"mt-4 flex items-center",children:[e("label",{htmlFor:"acno",className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Account Number"}),e("input",{id:"acno",type:"text",className:"form-input flex-1",placeholder:"Enter Account Number"})]}),t("div",{className:"mt-4 flex items-center",children:[e("label",{htmlFor:"bank-name",className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Bank Name"}),e("input",{id:"bank-name",type:"text",className:"form-input flex-1",placeholder:"Enter Bank Name"})]}),t("div",{className:"mt-4 flex items-center",children:[e("label",{htmlFor:"swiftNumber",className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"SWIFT Number"}),e("input",{id:"swiftNumber",type:"text",className:"form-input flex-1",placeholder:"Enter SWIFT Number"})]}),t("div",{className:"mt-4 flex items-center",children:[e("label",{htmlFor:"ibanNumber",className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"IBAN Number"}),e("input",{id:"ibanNumber",type:"text",className:"form-input flex-1",placeholder:"Enter IBAN Number"})]}),t("div",{className:"mt-4 flex items-center",children:[e("label",{className:"ltr:mr-2 rtl:ml-2 w-1/3 mb-0",children:"Country"}),t("select",{id:"country",className:"form-select flex-1",children:[e("option",{value:"",children:"Choose Country"}),["United States","United Kingdom","Canada","Australia","Germany","India"].map(a=>e("option",{value:a,children:a},a))]})]})]})]})}),t("div",{className:"mt-8",children:[e("div",{className:"table-responsive",children:t("table",{children:[e("thead",{children:t("tr",{children:[e("th",{children:"Item"}),e("th",{className:"w-1",children:"Quantity"}),e("th",{className:"w-1",children:"Price"}),e("th",{children:"Total"}),e("th",{className:"w-1"})]})}),t("tbody",{children:[i.length<=0&&e("tr",{children:e("td",{colSpan:5,className:"!text-center font-semibold",children:"No Item Available"})}),i.map(a=>t("tr",{className:"align-top",children:[t("td",{children:[e("input",{type:"text",className:"form-input min-w-[200px]",placeholder:"Enter Item Name",defaultValue:a.title}),e("textarea",{className:"form-textarea mt-4",placeholder:"Enter Description",defaultValue:a.description})]}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Quantity",min:0,defaultValue:a.quantity,onChange:l=>N("quantity",l.target.value,a.id)})}),e("td",{children:e("input",{type:"number",className:"form-input w-32",placeholder:"Price",min:0,defaultValue:a.amount,onChange:l=>N("price",l.target.value,a.id)})}),t("td",{children:[p[u],a.quantity*a.amount]}),e("td",{children:e("button",{type:"button",onClick:()=>I(a),children:e(k,{className:"w-5 h-5"})})})]},a.id))]})]})}),e("div",{className:"flex justify-between sm:flex-row flex-col mt-6 px-4",children:e("div",{className:"sm:mb-0 mb-6",children:e("button",{type:"button",className:"btn btn-primary",onClick:x,children:"Add Item"})})})]}),t("div",{className:"mt-8 px-4",children:[e("label",{htmlFor:"notes",children:"Notes"}),e("textarea",{id:"notes",name:"notes",className:"form-textarea min-h-[130px]",placeholder:"Notes...."})]})]}),t("div",{className:"xl:w-96 w-full xl:mt-0 mt-6",children:[t("div",{className:"panel mb-5",children:[e("label",{htmlFor:"currency",children:"Currency"}),e("select",{id:"currency",name:"currency",value:u,onChange:a=>y(a.target.value),className:"form-select",children:g.map(a=>e("option",{children:a},a))}),t("div",{className:"mt-4 grid sm:grid-cols-2 grid-cols-1 gap-4",children:[t("div",{children:[e("label",{htmlFor:"tax",children:"Tax(%) "}),e("input",{id:"tax",type:"number",name:"tax",className:"form-input",defaultValue:0})]}),t("div",{children:[e("label",{htmlFor:"discount",children:"Discount(%) "}),e("input",{id:"discount",type:"number",name:"discount",className:"form-input",defaultValue:0})]})]}),t("div",{className:"mt-4",children:[t("label",{htmlFor:"shipping-charge",children:["Shipping Charge(",p[u],") "]}),e("input",{id:"shipping-charge",type:"number",name:"shipping-charge",className:"form-input",defaultValue:0})]}),t("div",{className:"mt-4",children:[e("label",{htmlFor:"payment-method",children:"Accept Payment Via"}),t("select",{id:"payment-method",name:"payment-method",className:"form-select",children:[e("option",{value:"",children:"Select Payment"}),e("option",{value:"bank",children:"Bank Account"}),e("option",{value:"paypal",children:"Paypal"}),e("option",{value:"upi",children:"UPI Transfer"})]})]})]}),e("div",{className:"panel",children:e("div",{className:"grid xl:grid-cols-1 lg:grid-cols-4 sm:grid-cols-2 grid-cols-1 gap-4",children:t("button",{type:"button",className:"btn btn-success w-full gap-2",disabled:f,onClick:E,children:[e(R,{className:"ltr:mr-2 rtl:ml-2 shrink-0"})," Save"]})})})]})]})};export{L as default};
