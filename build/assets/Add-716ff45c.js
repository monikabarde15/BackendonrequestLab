import{t as x,c as v,r as n,s as N,j as i,a as r,b as w}from"./index-3a453257.js";import{I as y}from"./IconSave-e9bb8cf2.js";import{z as k}from"./index-37c81567.js";const D=()=>{const p=x(),o=v(),[u,h]=n.useState("/assets/images/cybblackpink.png"),[t,d]=n.useState({title:"",description:"",price:"",image:null}),[s,m]=n.useState({});n.useEffect(()=>{o(N("Add Expense"))},[o]);const b=e=>{var c;const a=(c=e.target.files)==null?void 0:c[0];a&&(d({...t,image:a}),h(URL.createObjectURL(a)))},l=e=>{d({...t,[e.target.name]:e.target.value}),m(a=>({...a,[e.target.name]:""}))},f=()=>{const e={};if(t.title.trim()||(e.title="Title is required"),t.description.trim()||(e.description="Description is required"),t.price.trim()?Number(t.price)<=0&&(e.price="Price must be greater than 0"):e.price="Price is required",m(e),Object.keys(e).length>0){const a=Object.keys(e)[0],c=document.getElementById(a);return c==null||c.focus(),!1}return!0},g=async()=>{if(f())try{const e=new FormData;e.append("title",t.title),e.append("description",t.description),e.append("price",t.price),t.image&&e.append("image",t.image),(await w.post("https://cybitbackend.onrender.com/api/expenses",e,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&setTimeout(()=>{k.success("Expense saved!"),p("/apps/expenses/list")},1e3)}catch(e){console.error(e),alert("Error saving expense.")}};return i("div",{className:"panel max-w-2xl mx-auto p-6 shadow-lg rounded-xl bg-white dark:bg-gray-800",children:[i("div",{className:"flex flex-col items-center mb-6",children:[r("img",{src:u,alt:"Preview",className:"w-28 h-28 object-cover rounded-xl border shadow-md mb-4"}),i("label",{className:"cursor-pointer px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition",children:["Upload Image",r("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})]}),i("div",{className:"mb-4",children:[r("label",{htmlFor:"title",className:"block font-medium mb-1",children:"Title"}),r("input",{id:"title",name:"title",type:"text",value:t.title,onChange:l,className:`form-input w-full ${s.title?"border-red-500":""}`,placeholder:"Enter title"}),s.title&&r("p",{className:"text-red-500 text-sm mt-1",children:s.title})]}),i("div",{className:"mb-4",children:[r("label",{htmlFor:"description",className:"block font-medium mb-1",children:"Description"}),r("textarea",{id:"description",name:"description",value:t.description,onChange:l,className:`form-textarea w-full min-h-[100px] ${s.description?"border-red-500":""}`,placeholder:"Write description..."}),s.description&&r("p",{className:"text-red-500 text-sm mt-1",children:s.description})]}),i("div",{className:"mb-6",children:[r("label",{htmlFor:"price",className:"block font-medium mb-1",children:"Price"}),r("input",{id:"price",name:"price",type:"number",value:t.price,onChange:l,className:`form-input w-full ${s.price?"border-red-500":""}`,placeholder:"Enter price"}),s.price&&r("p",{className:"text-red-500 text-sm mt-1",children:s.price})]}),r("div",{className:"flex justify-center",children:i("button",{type:"button",className:"btn btn-success px-8 py-2 text-lg rounded-lg shadow-md",onClick:g,children:[r(y,{className:"mr-2 shrink-0"})," Save"]})})]})};export{D as default};
