import{c as I,t as P,u as y,r as l,s as E,j as o,a as s,Z as a,L as R,a0 as j,b as $,y as m}from"./index-e4a951c8.js";import{I as d}from"./IconUser-4b7115f3.js";import{I as L}from"./IconMail-aee906bb.js";import{I as v}from"./IconLockDots-e76e7ef2.js";const z=()=>{const g=I(),b=P();y(e=>e.themeConfig.rtlClass);const _=y(e=>e.themeConfig);l.useState(_.locale),l.useEffect(()=>{g(E("Register Boxed"))},[g]);const[t,N]=l.useState({first_name:"",last_name:"",email:"",username:"",phone:"",password1:"",password2:""}),[u,h]=l.useState({}),[f,x]=l.useState(!1),k=()=>{let e={};const r=/^[A-Za-z\s]{2,}$/,c=/^[0-9]{10}$/,n=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;return(!t.first_name||!r.test(t.first_name))&&(e.first_name=a.t("First name must be at least 2 letters.")),(!t.last_name||!r.test(t.last_name))&&(e.last_name=a.t("Last name must be at least 2 letters.")),(!t.email||!n.test(t.email))&&(e.email=a.t("Enter a valid email.")),(!t.username||t.username.length<4)&&(e.username=a.t("Username must be at least 4 characters.")),(!t.phone||!c.test(t.phone))&&(e.phone=a.t("Phone number must be 10 digits.")),(!t.password1||t.password1.length<6)&&(e.password1=a.t("Password must be at least 6 characters.")),t.password1!==t.password2&&(e.password2=a.t("Passwords do not match.")),h(e),Object.keys(e).length===0},S=e=>{N({...t,[e.target.name]:e.target.value}),h(r=>({...r,[e.target.name]:""}))},C=async e=>{var r,c;if(e.preventDefault(),!!k()){x(!0);try{(r=(await $.post("https://backend.onrequestlab.com/api/v1/users/auth/registration/",{...t,is_superuser:!1,is_staff:!1,is_active:!0},{headers:{"Content-Type":"application/json"}})).data)!=null&&r.detail?(sessionStorage.setItem("formData",JSON.stringify(t)),document.cookie=`username=${encodeURIComponent(t.username)}; path=/; max-age=86400`,document.cookie=`email=${encodeURIComponent(t.email)}; path=/; max-age=86400`,localStorage.setItem("email",t.email),m.success(a.t("OTP sent successfully!"),{position:"top-center"}),b("/otp")):(m.success(a.t("Registration successful!"),{position:"top-center"}),b("/"))}catch(n){if(console.error(n),(c=n.response)!=null&&c.data){const i=n.response.data;if(typeof i=="object"&&!i.detail){const w={};Object.keys(i).forEach(p=>{w[p]=i[p][0]}),h(p=>({...p,...w})),m.error(a.t("Please correct highlighted fields."),{position:"top-center"})}else m.error(i.detail||a.t("Something went wrong."),{position:"top-center"})}else m.error(a.t("An error occurred. Please try again."),{position:"top-center"})}finally{x(!1)}}};return o("div",{className:"relative flex min-h-screen items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center px-6 py-10 dark:bg-[#060818] sm:px-16",children:[o("div",{className:"relative w-full max-w-[480px] rounded-lg bg-white/80 p-8 dark:bg-black/60 backdrop-blur-md shadow-lg",children:[s("h1",{className:"text-3xl font-extrabold text-primary mb-6 uppercase text-center",children:a.t("Sign Up")}),o("form",{onSubmit:C,className:"space-y-4",children:[[{name:"first_name",label:"First Name",icon:s(d,{})},{name:"last_name",label:"Last Name",icon:s(d,{})},{name:"email",label:"Email",icon:s(L,{}),type:"email"},{name:"username",label:"Username",icon:s(d,{})},{name:"phone",label:"Phone Number",icon:s(d,{}),type:"number"},{name:"password1",label:"Password",icon:s(v,{}),type:"password"},{name:"password2",label:"Confirm Password",icon:s(v,{}),type:"password"}].map(e=>o("div",{children:[s("label",{className:"block text-sm font-semibold",children:a.t(e.label)}),o("div",{className:"relative",children:[s("input",{name:e.name,type:e.type||"text",value:t[e.name],onChange:S,placeholder:`${a.t("Enter")} ${a.t(e.label)}`,className:`form-input ps-10 w-full placeholder:text-white-dark ${u[e.name]?"border-red-500":""}`}),s("span",{className:"absolute start-4 top-1/2 -translate-y-1/2 text-white-dark",children:e.icon})]}),u[e.name]&&s("p",{className:"text-red-500 text-sm mt-1",children:u[e.name]})]},e.name)),s("button",{type:"submit",disabled:f,className:"btn btn-gradient mt-6 w-full uppercase border-0 shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:f?a.t("Registering..."):a.t("Sign Up")})]}),o("div",{className:"text-center mt-6 text-sm dark:text-white",children:[a.t("Already have an account?")," ",s(R,{to:"/login",className:"text-primary font-semibold underline",children:a.t("Sign In")})]})]}),s(j,{autoClose:2e3,theme:"colored"})]})};export{z as default};
