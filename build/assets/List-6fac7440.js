import{c as v,r as a,s as E,b as g,j as s,a as t,L as k,N as L,o as S}from"./index-3a453257.js";import{I as C}from"./IconTrashLines-d8b814c2.js";import{I as j}from"./IconPlus-630b603f.js";import{F as I,z as P}from"./index-37c81567.js";const z=()=>{const o=v(),[c,d]=a.useState([]),[n,x]=a.useState(""),[l,p]=a.useState(1),[h,f]=a.useState(""),i=5;a.useEffect(()=>{o(E("Expense List")),N()},[o]);const N=async()=>{try{const e=await g.get("https://cybitbackend.onrender.com/api/expenses");d(e.data.data||[])}catch(e){console.error("Error fetching expenses:",e)}},y=async e=>{if(window.confirm("Are you sure want to delete this expense?"))try{await g.delete(`https://cybitbackend.onrender.com/api/expenses/${e}`),d(c.filter(r=>r._id!==e)),P.success("Expense deleted successfully ✅"),setTimeout(()=>f(""),3e3)}catch(r){console.error("Error deleting expense:",r),alert("Failed to delete expense.")}},m=c.filter(e=>e.title.toLowerCase().includes(n.toLowerCase())||e.description.toLowerCase().includes(n.toLowerCase())),u=Math.ceil(m.length/i),b=m.slice((l-1)*i,l*i),w=e=>e?e.startsWith("http")?e:`https://cybitbackend.onrender.com/uploads/${e}`:"/assets/images/cybblackpink.png";return s("div",{className:"panel p-4",children:[t(I,{position:"top-right",reverseOrder:!1}),s("div",{className:"flex items-center justify-between mb-4",children:[s("h2",{className:"text-xl font-bold",children:["Expense List (",c.length," total)"]}),s(k,{to:"/apps/expenses/add",className:"btn btn-primary gap-2",children:[t(j,{})," Add Expense"]})]}),h&&t("div",{className:"mb-3 p-2 bg-green-100 text-green-700 rounded",children:h}),t("div",{className:"mb-3",children:t("input",{type:"text",placeholder:"Search by title or description...",value:n,onChange:e=>{x(e.target.value),p(1)},className:"form-input w-full md:w-1/3"})}),t("div",{className:"overflow-x-auto",children:s("table",{className:"table-auto w-full border",children:[t("thead",{children:s("tr",{className:"bg-gray-100 dark:bg-gray-700 text-left",children:[t("th",{className:"p-2 border",children:"Image"}),t("th",{className:"p-2 border",children:"Title"}),t("th",{className:"p-2 border",children:"Description"}),t("th",{className:"p-2 border",children:"Price"}),t("th",{className:"p-2 border text-center",children:"Actions"})]})}),t("tbody",{children:b.length?b.map(e=>s("tr",{className:"hover:bg-gray-50",children:[t("td",{className:"p-2 border",children:t("img",{src:w(e.image),alt:e.title,className:"w-12 h-12 object-cover rounded"})}),t("td",{className:"p-2 border",children:e.title}),t("td",{className:"p-2 border",children:e.description}),s("td",{className:"p-2 border",children:["₹ ",e.price]}),t("td",{className:"p-2 border text-center",children:s("div",{className:"flex gap-3 justify-center",children:[t(L,{to:`/apps/expenses/edit/${e._id}`,className:"flex hover:text-info",children:t(S,{className:"w-5 h-5"})}),t("button",{type:"button",className:"flex hover:text-danger",onClick:()=>y(e._id),children:t(C,{className:"w-5 h-5"})})]})})]},e._id)):t("tr",{children:t("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No expenses found."})})})]})}),u>1&&t("div",{className:"flex justify-center mt-4 gap-2",children:Array.from({length:u},(e,r)=>t("button",{onClick:()=>p(r+1),className:`px-3 py-1 border rounded ${l===r+1?"bg-blue-600 text-white":"bg-white dark:bg-gray-700"}`,children:r+1},r))})]})};export{z as default};
