import{r as l,u as x,j as n,a as e,L as y,D as N}from"./index-8c252e2a.js";import{_ as w}from"./react-apexcharts.min-c4f463e0.js";import{I as C}from"./IconHorizontalDots-2f65dfa5.js";const L=({userId:u})=>{const[m,i]=l.useState(!0),[I,h]=l.useState([0,0]),[r,p]=l.useState({series:[{name:"Revenue",data:[0,0]}],options:{chart:{id:"revenue-chart"},xaxis:{categories:["Payments","Instances"]}}});x(s=>s.themeConfig.theme==="dark"||s.themeConfig.isDarkMode);const b=s=>{var c;const o=`; ${document.cookie}`.split(`; ${s}=`);if(o.length===2)return(c=o.pop())==null?void 0:c.split(";").shift()},g=JSON.parse(localStorage.getItem("userId")||"{}");console.log("user=",g);const d=b("access"),f=["rgba(52,152,219,0.7)","rgba(46,204,113,0.7)","rgba(231,76,60,0.7)","rgba(155,89,182,0.7)","rgba(241,196,15,0.7)","rgba(230,126,34,0.7)"],v=[{url:"https://backend.onrequestlab.com/api/v1/admin/users/count",name:"Users"},{url:"https://backend.onrequestlab.com/api/v1/admin/support/count",name:"Support"},{url:"https://backend.onrequestlab.com/api/v1/admin/payments/count",name:"Payments"},{url:"https://backend.onrequestlab.com/api/v1/admin/instances/count",name:"Instances"},{url:"https://backend.onrequestlab.com/api/v1/admin/feedback/count",name:"Feedback"},{url:"https://backend.onrequestlab.com/api/v1/admin/contact/count",name:"Contact"}];return l.useEffect(()=>{(async()=>{i(!0);try{const t=await Promise.all(v.map(async a=>{const k=await(await fetch(a.url,{headers:{Authorization:"Bearer "+d}})).json();return{name:a.name,count:k.count??0}}));h(t);const o=t.map(a=>a.name),c=t.map(a=>a.count);p({...r,series:[{name:"Total Count",data:c}],options:{...r.options,xaxis:{categories:o},colors:f}})}catch(t){console.error(t)}finally{i(!1)}})()},[u,d]),n("div",{children:[e("ul",{className:"flex space-x-2 rtl:space-x-reverse",children:e("li",{children:e(y,{to:"/",className:"text-primary hover:underline",children:"Dashboard"})})}),n("div",{className:"pt-5",children:[e("div",{className:"grid xl:grid-cols-3 gap-6 mb-6",children:n("div",{className:"panel h-full xl:col-span-2",children:[n("div",{className:"flex items-center justify-between dark:text-white-light mb-5",children:[e("h5",{className:"font-semibold text-lg"}),e("div",{className:"dropdown",children:e(N,{offset:[0,1],placement:"bottom-end",button:e(C,{className:"text-black/70 dark:text-white/70 hover:!text-primary"}),children:n("ul",{children:[e("li",{children:e("button",{type:"button",children:"Weekly"})}),e("li",{children:e("button",{type:"button",children:"Monthly"})}),e("li",{children:e("button",{type:"button",children:"Yearly"})})]})})})]}),e("div",{className:"relative",children:e("div",{className:"bg-white dark:bg-black rounded-lg overflow-hidden",children:m?e("div",{className:"min-h-[325px] grid place-content-center bg-white-light/30 dark:bg-dark dark:bg-opacity-[0.08] ",children:e("span",{className:"animate-spin border-2 border-black dark:border-white !border-l-transparent  rounded-full w-5 h-5 inline-flex"})}):e(w,{series:r.series,options:r.options,type:"area",height:325})})})]})}),e("div",{className:"grid sm:grid-cols-2 xl:grid-cols-3 gap-6 mb-6",children:e("div",{className:"panel h-full p-0"})})]})]})};export{L as default};
