import{ac as x,r as n,a as s,j as k,b as L}from"./index-8c252e2a.js";const S="https://backend.onrequestlab.com/api/v1",A=()=>{const f=x(),[e,b]=n.useState(null),[g,d]=n.useState(!0),[u,m]=n.useState(70),c=n.useRef(!1),i=new URLSearchParams(f.search).get("user"),l=localStorage.getItem("jwt-auth")||localStorage.getItem("access")||"";n.useEffect(()=>{(async()=>{if(!i||!l){d(!1);return}try{const a=(await L.get(`${S}/lab/userinst/${i}/`,{headers:{Authorization:`Bearer ${l}`}})).data||[],o=a.find(p=>p.status==="Launched")||a[0];b(o||null)}catch(r){console.error("Error fetching instance:",r)}finally{d(!1)}})()},[i,l]),n.useEffect(()=>{const t=a=>{if(!c.current)return;const o=a.clientX/window.innerWidth*100;o>30&&o<80&&m(o)},r=()=>{c.current=!1,document.body.style.cursor="default"};return window.addEventListener("mousemove",t),window.addEventListener("mouseup",r),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",r)}},[]);const y=()=>{c.current=!0,document.body.style.cursor="col-resize"};if(g)return s("div",{className:"flex items-center justify-center h-screen text-gray-300 bg-black",children:"Loading..."});if(!e)return s("div",{className:"flex items-center justify-center h-screen text-gray-300 bg-black",children:"No active instance"});e.instance_ip,e.userName||e.AccessKeyId,e.AccessKeyId||e.SecretAccessKey;const h=e.instance_type||"container",w=h==="aws"?"https://backend.onrequestlab.com/learn/aws/":h==="iscsi"?"https://backend.onrequestlab.com/learn/iscsi/":"https://backend.onrequestlab.com/learn/docker/",v=e.web_ssh_url;return k("div",{style:{display:"flex",height:"100vh",width:"100vw",backgroundColor:"#111",overflow:"hidden"},children:[s("div",{style:{width:`${u}%`,backgroundColor:"#fff",borderRight:"2px solid #2d2d2d",overflowY:"auto",display:"flex",flexDirection:"column",transition:"width 0.1s ease-out"},children:s("iframe",{src:w,title:"Tutorial",style:{flex:1,width:"100%",height:"100%",border:"none"}})}),s("div",{onMouseDown:y,style:{width:"6px",cursor:"col-resize",backgroundColor:"#444",transition:"background 0.2s"},onMouseEnter:t=>t.target.style.backgroundColor="#666",onMouseLeave:t=>t.target.style.backgroundColor="#444"}),s("div",{style:{width:`${100-u}%`,backgroundColor:"#1e1e1e",display:"flex",flexDirection:"column"},children:s("iframe",{src:v,title:"WebSSH Terminal",style:{flex:1,width:"100%",height:"100%",border:"none"}})})]})};export{A as default};
